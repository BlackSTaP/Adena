<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∞–¥–µ–Ω</title>
  <style>
    :root{
      --bg-light:#eef1f5; --bg-dark:#1e1e1e;
      --card-light:#ffffff; --card-dark:#2c2c2c;
      --text-light:#2e2e2e; --text-dark:#f0f0f0;
      --accent:#4a90e2; --accent-hov:#3b7dc6;
    }
    *{box-sizing:border-box;margin:0}
    body{
      min-height:100vh;display:flex;justify-content:center;align-items:center;
      font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;
      background:var(--bg-light);transition:.3s background,color;
    }
    body.dark{background:var(--bg-dark);color:var(--text-dark)}

    .app{display:flex;gap:32px;padding:20px;width:100%;max-width:900px}

    .panel,.log{
      background:var(--card-light);transition:.3s background;
      border-radius:15px;padding:32px 24px;box-shadow:0 8px 24px rgba(0,0,0,.1);
    }
    body.dark .panel,body.dark .log{background:var(--card-dark)}

    .panel{width:100%;max-width:420px;text-align:center}
    .log{width:280px;overflow:auto}

    h2{margin-bottom:24px}
    .log h3{margin-top:0}

    input,button{
      width:100%;font-size:16px;padding:12px;margin-top:12px;border-radius:8px;
    }
    input{border:1px solid #ccc;transition:.2s}
    input:focus{border-color:var(--accent);outline:none;box-shadow:0 0 5px rgba(123,170,247,.4)}

    button{
      border:none;background:var(--accent);color:#fff;font-weight:600;cursor:pointer;
      transition:.3s background;
    }
    button:hover{background:var(--accent-hov)}
    #result{margin-top:18px;font-size:18px;font-weight:500}

    .entry{padding:6px 0;border-bottom:1px dashed rgba(0,0,0,.1)}
    body.dark .entry{border-color:rgba(255,255,255,.15)}

    .theme-toggle{
      position:fixed;top:16px;right:16px;font-size:24px;background:none;
      border:none;cursor:pointer;color:inherit;
    }
  </style>
</head>
<body>
  <button class="theme-toggle" onclick="toggleTheme()">üåô</button>

  <div class="app">

    <!-- —Ñ–æ—Ä–º–∞ —Ä–∞—Å—á—ë—Ç–∞ -->
    <div class="panel">
      <h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ñ–∞—Ä–º–∞ –∞–¥–µ–Ω</h2>

      <input type="text" id="location" placeholder="–õ–æ–∫–∞—Ü–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
      <input type="number" id="adena"    placeholder="–°–∫–æ–ª—å–∫–æ –∞–¥–µ–Ω? –ù–∞–ø—Ä–∏–º–µ—Ä: 1500000">
      <input type="number" id="minutes"  placeholder="–ó–∞ —Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç? –ù–∞–ø—Ä–∏–º–µ—Ä: 6">

      <button onclick="calculate()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∑–∞ —á–∞—Å</button>
      <button onclick="saveResult()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ç–∞–±–ª–∏—Ü—É</button>

      <div id="result"></div>
    </div>

    <!-- –±–æ–∫–æ–≤–æ–π –ª–æ–≥ -->
    <aside class="log">
      <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–º–µ—Ä—ã</h3>
      <div id="history"></div>
    </aside>

  </div>

  <script>
    /* –ø–æ–º–æ—â–Ω–∏–∫–∏ */
    const $ = id => document.getElementById(id);
    const qs = sel => document.querySelector(sel);

    /* —Ä–∞—Å—á—ë—Ç */
    function calculate() {
      const adena   = parseFloat($('adena').value);
      const minutes = parseFloat($('minutes').value);
      if (isNaN(adena) || isNaN(minutes) || minutes <= 0) {
        $('result').textContent = '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —á–∏—Å–ª–∞.';
        return null;
      }
      const perHour = (adena / minutes) * 60;
      $('result').textContent = `–ó–∞ —á–∞—Å: ${perHour.toLocaleString('ru-RU')} –∞–¥–µ–Ω`;
      return perHour;
    }

    /* —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage (10 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö) */
    function saveResult() {
      const perHour = calculate();
      if (perHour === null) return;      // –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

      const location = ($('location').value || '–ë–µ–∑ –ª–æ–∫–∞—Ü–∏–∏').trim();
      const entry = { location, perHour: Math.round(perHour) };

      const list = JSON.parse(localStorage.getItem('calcLog') || '[]');
      list.unshift(entry);
      if (list.length > 10) list.pop();  // –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ 10 —Å–≤–µ–∂–∏—Ö
      localStorage.setItem('calcLog', JSON.stringify(list));
      renderHistory();
    }

    /* –≤—ã–≤–æ–¥ –ª–æ–≥–∞ */
    function renderHistory() {
      const list = JSON.parse(localStorage.getItem('calcLog') || '[]');
      $('history').innerHTML = list.length
        ? list.map(e => `
            <div class="entry">
              <strong>${e.location}</strong><br>
              ${e.perHour.toLocaleString('ru-RU')} –∞–¥–µ–Ω/—á
            </div>`).join('')
        : '<em>–ü–æ–∫–∞ –ø—É—Å—Ç–æ</em>';
    }

    /* —Ç–µ–º–∞ */
    function toggleTheme() {
      const dark = document.body.classList.toggle('dark');
      qs('.theme-toggle').textContent = dark ? '‚òÄÔ∏è' : 'üåô';
      localStorage.setItem('theme', dark ? 'dark' : 'light');
    }

    /* –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è */
    window.addEventListener('DOMContentLoaded', () => {
      if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark');
        qs('.theme-toggle').textContent = '‚òÄÔ∏è';
      }
      renderHistory();
    });
  </script>
</body>
</html>
